# å¼€å‘æŒ‡å—

## 1. å¼€å‘ç¯å¢ƒæ­å»º

### 1.1 ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, macOS 10.15+, Ubuntu 18.04+
- **Pythonç‰ˆæœ¬**: 3.8 - 3.11
- **å†…å­˜**: æœ€å°‘4GBï¼Œæ¨è8GB+
- **å­˜å‚¨**: è‡³å°‘2GBå¯ç”¨ç©ºé—´

### 1.2 ç¯å¢ƒå®‰è£…æ­¥éª¤

#### Step 1: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate
```

#### Step 2: å®‰è£…ä¾èµ–
```bash
# å‡çº§pip
python -m pip install --upgrade pip

# å®‰è£…æ ¸å¿ƒä¾èµ–
pip install paddlepaddle
pip install paddleocr
pip install opencv-python
pip install pillow
pip install numpy
pip install pyyaml
pip install tkinter

# å¼€å‘ä¾èµ–
pip install pytest
pip install black
pip install flake8
pip install mypy
```

#### Step 3: éªŒè¯å®‰è£…
```python
# test_installation.py
from paddleocr import PaddleOCR
import cv2
import numpy as np

def test_installation():
    try:
        ocr = PaddleOCR(use_angle_cls=True, lang='ch')
        print("âœ… PaddleOCRå®‰è£…æˆåŠŸ")
        
        # æµ‹è¯•OpenCV
        img = np.zeros((100, 100, 3), dtype=np.uint8)
        print("âœ… OpenCVå®‰è£…æˆåŠŸ")
        
        print("ğŸ‰ ç¯å¢ƒæ­å»ºå®Œæˆ!")
        return True
    except Exception as e:
        print(f"âŒ å®‰è£…éªŒè¯å¤±è´¥: {e}")
        return False

if __name__ == "__main__":
    test_installation()
```

## 2. é¡¹ç›®ç»“æ„

### 2.1 ç›®å½•ç»“æ„
```
python-OCR-date/
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt          # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ setup.py                 # å®‰è£…è„šæœ¬
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.yaml        # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ logging.yaml         # æ—¥å¿—é…ç½®
â”œâ”€â”€ core/                    # æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ ocr_engine.py        # OCRå¼•æ“
â”‚   â”œâ”€â”€ date_parser.py       # æ—¥æœŸè§£æå™¨
â”‚   â”œâ”€â”€ image_processor.py   # å›¾åƒå¤„ç†å™¨
â”‚   â””â”€â”€ models.py           # æ•°æ®æ¨¡å‹
â”œâ”€â”€ v1/                     # V1ç‰ˆæœ¬åŠŸèƒ½
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ gui/                # GUIç•Œé¢
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main_window.py  # ä¸»çª—å£
â”‚   â”‚   â”œâ”€â”€ file_dialog.py  # æ–‡ä»¶å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ result_display.py # ç»“æœæ˜¾ç¤º
â”‚   â”œâ”€â”€ handlers/           # ä¸šåŠ¡å¤„ç†
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ file_handler.py # æ–‡ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ batch_processor.py # æ‰¹é‡å¤„ç†
â”‚   â””â”€â”€ main.py            # V1ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ v2/                    # V2ç‰ˆæœ¬(é¢„ç•™)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ realtime/          # å®æ—¶è¯†åˆ«
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ logger.py          # æ—¥å¿—å·¥å…·
â”‚   â”œâ”€â”€ config_loader.py   # é…ç½®åŠ è½½
â”‚   â””â”€â”€ validators.py      # éªŒè¯å·¥å…·
â”œâ”€â”€ tests/                 # æµ‹è¯•ç”¨ä¾‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_core/         # æ ¸å¿ƒæ¨¡å—æµ‹è¯•
â”‚   â”œâ”€â”€ test_v1/          # V1åŠŸèƒ½æµ‹è¯•
â”‚   â””â”€â”€ test_data/        # æµ‹è¯•æ•°æ®
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD.md
â”‚   â”œâ”€â”€ æŠ€æœ¯é€‰å‹æŠ¥å‘Š.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ¶æ„è®¾è®¡.md
â”‚   â”œâ”€â”€ å¼€å‘æŒ‡å—.md
â”‚   â””â”€â”€ APIæ–‡æ¡£.md
â””â”€â”€ test_image/           # æµ‹è¯•å›¾ç‰‡
    â”œâ”€â”€ 2025.06.24.jpg
    â””â”€â”€ 2025.06.25.jpg
```

### 2.2 æ¨¡å—ä¾èµ–å…³ç³»
```
v1.main
    â†“
v1.gui.main_window
    â†“
v1.handlers.file_handler
    â†“
core.ocr_engine â† core.image_processor
    â†“
core.date_parser
    â†“
core.models
```

## 3. ç¼–ç è§„èŒƒ

### 3.1 Pythonä»£ç è§„èŒƒ
- éµå¾ªPEP 8ç¼–ç è§„èŒƒ
- ä½¿ç”¨ç±»å‹æ³¨è§£(Type Hints)
- å‡½æ•°å’Œç±»å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
- å˜é‡å’Œå‡½æ•°ä½¿ç”¨snake_caseå‘½å
- ç±»ä½¿ç”¨PascalCaseå‘½å
- å¸¸é‡ä½¿ç”¨UPPER_CASEå‘½å

### 3.2 ä»£ç ç¤ºä¾‹
```python
from typing import List, Optional, Tuple
import logging

logger = logging.getLogger(__name__)

class DateRecognizer:
    """æ—¥æœŸè¯†åˆ«å™¨ç±»
    
    è´Ÿè´£ä»å›¾åƒä¸­è¯†åˆ«å’Œè§£ææ—¥æœŸä¿¡æ¯
    
    Attributes:
        ocr_engine: OCRè¯†åˆ«å¼•æ“
        date_parser: æ—¥æœŸè§£æå™¨
    """
    
    def __init__(self, config: dict) -> None:
        """åˆå§‹åŒ–æ—¥æœŸè¯†åˆ«å™¨
        
        Args:
            config: é…ç½®å­—å…¸
        """
        self.ocr_engine = OCREngine(config)
        self.date_parser = DateParser(config)
        logger.info("DateRecognizer initialized")
    
    def recognize_date(self, image_path: str) -> Optional[str]:
        """è¯†åˆ«å›¾åƒä¸­çš„æ—¥æœŸ
        
        Args:
            image_path: å›¾åƒæ–‡ä»¶è·¯å¾„
            
        Returns:
            è¯†åˆ«åˆ°çš„æ—¥æœŸå­—ç¬¦ä¸²ï¼Œå¦‚æœæœªè¯†åˆ«åˆ°åˆ™è¿”å›None
            
        Raises:
            FileNotFoundError: å›¾åƒæ–‡ä»¶ä¸å­˜åœ¨
            ValueError: å›¾åƒæ ¼å¼ä¸æ”¯æŒ
        """
        try:
            # å®ç°é€»è¾‘
            pass
        except Exception as e:
            logger.error(f"Date recognition failed: {e}")
            raise
```

### 3.3 æ³¨é‡Šè§„èŒƒ
```python
# å•è¡Œæ³¨é‡Šï¼šè§£é‡Šä»£ç é€»è¾‘
def process_image(image_path: str) -> np.ndarray:
    """å¤„ç†å›¾åƒæ–‡ä»¶
    
    å¯¹è¾“å…¥å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°ºå¯¸è°ƒæ•´ã€å¢å¼ºç­‰æ“ä½œ
    
    Args:
        image_path (str): å›¾åƒæ–‡ä»¶è·¯å¾„
        
    Returns:
        np.ndarray: å¤„ç†åçš„å›¾åƒæ•°ç»„
        
    Raises:
        FileNotFoundError: æ–‡ä»¶ä¸å­˜åœ¨
        ValueError: æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ
        
    Example:
        >>> processed_img = process_image("test.jpg")
        >>> print(processed_img.shape)
        (480, 640, 3)
    """
    # TODO: å®ç°å›¾åƒå¤„ç†é€»è¾‘
    pass
```

## 4. æµ‹è¯•ç­–ç•¥

### 4.1 æµ‹è¯•åˆ†ç±»
- **å•å…ƒæµ‹è¯•**: æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç±»
- **é›†æˆæµ‹è¯•**: æµ‹è¯•æ¨¡å—é—´äº¤äº’
- **åŠŸèƒ½æµ‹è¯•**: æµ‹è¯•å®Œæ•´åŠŸèƒ½æµç¨‹
- **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•å¤„ç†é€Ÿåº¦å’Œèµ„æºä½¿ç”¨

### 4.2 æµ‹è¯•ç”¨ä¾‹ç¼–å†™
```python
# tests/test_core/test_date_parser.py
import pytest
from core.date_parser import DateParser

class TestDateParser:
    """æ—¥æœŸè§£æå™¨æµ‹è¯•ç±»"""
    
    def setup_method(self):
        """æµ‹è¯•å‰ç½®è®¾ç½®"""
        self.parser = DateParser()
    
    def test_parse_standard_format(self):
        """æµ‹è¯•æ ‡å‡†æ—¥æœŸæ ¼å¼è§£æ"""
        test_cases = [
            ("2025.06.24", "2025-06-24"),
            ("2025/06/24", "2025-06-24"),
            ("20250624", "2025-06-24"),
        ]
        
        for input_date, expected in test_cases:
            result = self.parser.parse_date(input_date)
            assert result == expected
    
    def test_invalid_date(self):
        """æµ‹è¯•æ— æ•ˆæ—¥æœŸå¤„ç†"""
        invalid_dates = ["2025.13.01", "2025.02.30", "abc"]
        
        for invalid_date in invalid_dates:
            with pytest.raises(ValueError):
                self.parser.parse_date(invalid_date)
    
    @pytest.mark.performance
    def test_parsing_performance(self):
        """æµ‹è¯•è§£ææ€§èƒ½"""
        import time
        
        start_time = time.time()
        for _ in range(1000):
            self.parser.parse_date("2025.06.24")
        end_time = time.time()
        
        assert (end_time - start_time) < 1.0  # 1000æ¬¡è§£æåº”åœ¨1ç§’å†…å®Œæˆ
```

### 4.3 è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/test_core/test_date_parser.py

# è¿è¡Œæ€§èƒ½æµ‹è¯•
pytest -m performance

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=core --cov-report=html
```

## 5. è°ƒè¯•æŒ‡å—

### 5.1 æ—¥å¿—é…ç½®
```python
# utils/logger.py
import logging
import logging.config
import yaml

def setup_logging(config_path: str = "config/logging.yaml"):
    """è®¾ç½®æ—¥å¿—é…ç½®"""
    with open(config_path, 'r', encoding='utf-8') as f:
        config = yaml.safe_load(f)
    
    logging.config.dictConfig(config)
    return logging.getLogger(__name__)

# ä½¿ç”¨ç¤ºä¾‹
logger = setup_logging()
logger.info("åº”ç”¨å¯åŠ¨")
logger.debug("è°ƒè¯•ä¿¡æ¯")
logger.warning("è­¦å‘Šä¿¡æ¯")
logger.error("é”™è¯¯ä¿¡æ¯")
```

### 5.2 è°ƒè¯•æŠ€å·§
```python
# 1. ä½¿ç”¨æ–­ç‚¹è°ƒè¯•
import pdb
pdb.set_trace()  # è®¾ç½®æ–­ç‚¹

# 2. å›¾åƒè°ƒè¯•
import cv2
def debug_image(image: np.ndarray, window_name: str = "Debug"):
    """æ˜¾ç¤ºè°ƒè¯•å›¾åƒ"""
    cv2.imshow(window_name, image)
    cv2.waitKey(0)
    cv2.destroyAllWindows()

# 3. æ€§èƒ½è°ƒè¯•
import time
from functools import wraps

def timing_decorator(func):
    """æ€§èƒ½è®¡æ—¶è£…é¥°å™¨"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f}ç§’")
        return result
    return wrapper

@timing_decorator
def slow_function():
    time.sleep(1)
```

## 6. ç‰ˆæœ¬æ§åˆ¶

### 6.1 Gitå·¥ä½œæµ
```bash
# 1. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/ocr-engine

# 2. æäº¤ä»£ç 
git add .
git commit -m "feat: å®ç°OCRå¼•æ“åŸºç¡€åŠŸèƒ½"

# 3. æ¨é€åˆ†æ”¯
git push origin feature/ocr-engine

# 4. åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge feature/ocr-engine
```

### 6.2 æäº¤ä¿¡æ¯è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

ç¤ºä¾‹:
feat: æ·»åŠ æ—¥æœŸè§£æåŠŸèƒ½
fix: ä¿®å¤å›¾åƒæ—‹è½¬è§’åº¦è®¡ç®—é”™è¯¯
docs: æ›´æ–°APIæ–‡æ¡£
```

## 7. éƒ¨ç½²æŒ‡å—

### 7.1 æ‰“åŒ…å‘å¸ƒ
```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
# setup.pyä¸­æ›´æ–°version

# 2. æ„å»ºåŒ…
python setup.py sdist bdist_wheel

# 3. å®‰è£…æµ‹è¯•
pip install dist/python-ocr-date-1.0.0.tar.gz
```

### 7.2 é…ç½®æ–‡ä»¶
```yaml
# config/settings.yaml
app:
  name: "å•†å“åŒ…è£…æ—¥æœŸè¯†åˆ«ç³»ç»Ÿ"
  version: "1.0.0"
  debug: false

ocr:
  engine: "paddleocr"
  model_dir: "./models"
  confidence_threshold: 0.8

logging:
  level: "INFO"
  file: "logs/app.log"
  max_size: "10MB"
  backup_count: 5
```

## 8. å¸¸è§é—®é¢˜

### 8.1 å®‰è£…é—®é¢˜
**Q: PaddleOCRå®‰è£…å¤±è´¥**
A: æ£€æŸ¥Pythonç‰ˆæœ¬ï¼Œç¡®ä¿åœ¨3.8-3.11èŒƒå›´å†…ï¼Œå°è¯•ä½¿ç”¨æ¸…åæºå®‰è£…

**Q: å†…å­˜ä¸è¶³é”™è¯¯**
A: è°ƒæ•´batch_sizeå‚æ•°ï¼Œå‡å°‘å¹¶è¡Œå¤„ç†æ•°é‡

### 8.2 è¿è¡Œé—®é¢˜
**Q: OCRè¯†åˆ«ç²¾åº¦ä½**
A: æ£€æŸ¥å›¾åƒè´¨é‡ï¼Œè°ƒæ•´é¢„å¤„ç†å‚æ•°ï¼Œè€ƒè™‘ä½¿ç”¨GPUåŠ é€Ÿ

**Q: å¤„ç†é€Ÿåº¦æ…¢**
A: å¯ç”¨GPUåŠ é€Ÿï¼Œè°ƒæ•´å›¾åƒå°ºå¯¸ï¼Œä¼˜åŒ–å¹¶è¡Œå¤„ç†å‚æ•°
